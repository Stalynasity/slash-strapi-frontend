<button class="p-button p-button-text mb-4" routerLink="/models/documentacion">
  <i class="pi pi-arrow-left mr-2"></i> Volver a búsqueda de documentación
</button>

<div class="p-4 card surface-card rounded-xl shadow-md">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Información del documento -->
    <div class="space-y-4 text-sm">
      <div class="grid grid-cols-2 gap-y-2 text-color-secondary">
        <span class="font-semibold">ID:</span><span class="font-bold">{{ documento.id }}</span>
        <span class="font-semibold">Autor de la documentación:</span><span>{{ documento.autor_documentacion }}</span>
        <span class="font-semibold">ID de la Incidencia:</span><span>{{ documento.incidencia_id }}</span>
        <span class="font-semibold">Fecha de documentación:</span><span>{{ documento.fecha_documentacion | date: 'dd/MM/yyyy' }}</span>
        <span class="font-semibold">Versión afectada:</span><span>{{ documento.version_afectada }}</span>
      </div>

      <div class="space-y-3">
        <div>
          <h4 class="text-primary font-medium">Causa raíz:</h4>
          <p class="text-color">{{ documento.causa_raiz || 'Sin información' }}</p>
        </div>
        <div>
          <h4 class="text-primary font-medium">Impacto</h4>
          <p class="text-color">{{ documento.impacto || 'Sin información' }}</p>
        </div>
        <div>
          <h4 class="text-primary font-medium">Solución aplicada</h4>
          <p class="text-color">{{ documento.solucion_aplicada || 'Sin información' }}</p>
        </div>
        <div>
          <h4 class="text-primary font-medium">Recomendaciones</h4>
          <p class="text-color">{{ documento.recomendaciones || 'Sin información' }}</p>
        </div>
      </div>
    </div>

    <!-- Área de PDF y QR o adjuntos -->
    <div class="flex flex-col items-center justify-center border-1 surface-border surface-ground rounded-md p-4 space-y-4 w-full">
      <!-- Código QR y compartir -->
                    <div class="col-span-12 md:col-span-4 flex flex-col items-center">
                    <img *ngIf="selectedIssue" [src]="qrCodeUrl" alt="QR" class="w-32 h-32 mb-4" />
                        <span class="text-gray-500 text-xs mb-4">Código QR del incidente</span>

                        <div class="flex flex-col gap-2 w-full">
                            <button pButton pRipple label="Compartir por correo" icon="pi pi-envelope" class="flex items-center gap-2 w-full justify-center" (click)="handleShare('email')" text></button>
                            <button pButton pRipple label="Compartir por WhatsApp" icon="pi pi-whatsapp" class="flex items-center gap-2 w-full justify-center" (click)="handleShare('whatsapp')" text></button>
                            <button pButton pRipple label="Compartir por Telegram" icon="pi pi-send" class="flex items-center gap-2 w-full justify-center" (click)="handleShare('telegram')" text></button>
                        </div>

                        <p class="text-xs text-gray-400 text-center mt-4">
                            Escanea el código QR para ver el incidente en tu móvil.
                        </p>
                    </div>
      <ng-container *ngIf="documento.adjuntos?.length > 0; else sinAdjuntos">
        <div *ngFor="let archivo of documento.adjuntos" class="flex items-center gap-2">
          <i class="pi pi-file-pdf text-2xl text-red-600"></i>
          <a [href]="'/ruta/archivos/' + archivo" target="_blank" class="text-primary hover:underline">{{ archivo }}</a>
        </div>
      </ng-container>
      <ng-template #sinAdjuntos>
        <p class="text-sm text-color-secondary">Sin archivos adjuntos</p>
      </ng-template>
    </div>
  </div>
</div>
