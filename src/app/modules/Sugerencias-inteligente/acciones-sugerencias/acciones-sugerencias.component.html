<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '640px' }"
  [contentStyle]="{ padding: '1.5rem' }"
  [breakpoints]="{ '960px': '90vw', '640px': '95vw' }"
  header="🔍 Detalle de Sugerencia Inteligente"
  [closable]="false"
>
  <div *ngIf="sugerencia" class="text-sm space-y-6 text-gray-700">

    <!-- Información general -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-xl border">
      <div>
        <span class="block text-xs text-gray-500 font-semibold mb-1">Código:</span>
        <span class="text-base font-bold text-gray-900">{{ sugerencia.codigo }}</span>
      </div>
      <div>
        <span class="block text-xs text-gray-500 font-semibold mb-1">Nivel de similitud:</span>
        <span class="text-green-600 font-bold">{{ sugerencia.similitud }}%</span>
      </div>
      <div class="md:col-span-2">
        <span class="block text-xs text-gray-500 font-semibold mb-1">Incidencia similar detectada:</span>
        <span class="text-gray-800 font-medium">{{ sugerencia.descripcion }}</span>
      </div>
    </div>

    <!-- Descripción del caso -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1"> Descripción del caso sugerido</label>
      <textarea
        pTextarea
        [(ngModel)]="sugerencia.descripcion_caso"
        rows="3"
        class="w-full border rounded-lg p-2"
        placeholder="Describe brevemente el caso sugerido..."
      ></textarea>
    </div>

    <!-- Solución sugerida -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1"> Detalle técnico / solución aplicada</label>
      <textarea
        pTextarea
        [(ngModel)]="sugerencia.solucion"
        rows="3"
        class="w-full border rounded-lg p-2"
        placeholder="Explica la solución técnica propuesta..."
      ></textarea>
    </div>

    <!-- Responsable -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
      <label class="block text-xs text-blue-800 font-semibold"> Responsable:</label>
      <span class="text-sm font-medium text-blue-900">{{ sugerencia.responsable }}</span>
    </div>

    <!-- Botones de acción -->
    <div class="flex flex-wrap justify-end gap-3 pt-4 border-t pt-4">
      <button
        pButton
        type="button"
        label="Ver documentación"
        icon="pi pi-book"
        class="p-button-sm p-button-info"
        (click)="verDocumentacion(sugerencia)"
      ></button>
      <button
        pButton
        type="button"
        label="Asociar sugerencia"
        icon="pi pi-link"
        class="p-button-sm p-button-success"
        (click)="buscarSugerencias()"
      ></button>
      <button
        pButton
        type="button"
        label="Cerrar"
        icon="pi pi-times"
        class="p-button-sm p-button-secondary"
        (click)="cerrarDialogo()"
      ></button>
    </div>
  </div>
</p-dialog>
